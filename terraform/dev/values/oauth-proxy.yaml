proxyVarsAsSecrets: true

config:
  existingSecret: oauth2-proxy-secret

extraArgs:
  provider: oidc
  oidc-issuer-url: https://login.microsoftonline.com/8a25df97-9f2b-4ef1-a9e7-3faf585640e8/v2.0
  redirect-url: https://oauth.dev.audioprothese.ovh/oauth2/callback
  email-domain: audioprotheseplus.onmicrosoft.com
  cookie-secure: "true"
  upstream: file:///dev/null
  pass-access-token: "true"
  set-authorization-header: "true"
  oidc_email_claim: "preferred_username"

ingress:
  enabled: true
  className: webapprouting.kubernetes.azure.com
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  hosts:
    - oauth.dev.audioprothese.ovh
  path: /oauth2/
  pathType: Prefix
  tls:
    - secretName: oauth-tls
      hosts:
        - oauth.dev.audioprothese.ovh

service:
  type: ClusterIP
  portNumber: 4180